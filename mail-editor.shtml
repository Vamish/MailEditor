<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>邮件编辑 | MailPanda</title>
    <link href="style/reset.css" type="text/css" rel="stylesheet" media="all">
    <link href="style/base.css" type="text/css" rel="stylesheet" media="all">
    <link href="style/spectrum.css" type="text/css" rel="stylesheet" media="all">
    <link href="style/common.css" type="text/css" rel="stylesheet" media="all">
    <link href="style/widget.css" type="text/css" rel="stylesheet" media="all">
    <!--此处为tinymce编辑器特有的主题样式文件，具体可见js/lib/tinymce/skins下所有文件 start-->
    <link href="js/lib/tinymce/skins/lightgray/skin.min.css" type="text/css" rel="stylesheet" media="all">
    <!--end-->
    <script src="js/lib/jquery.js"></script>
    <script type="text/javascript" src="js/lib/spectrum/spectrum.js"></script>
    <script src="js/lib/tab.js"></script>
    <script src="js/lib/tinymce/tinymce.js"></script>
    <script src="js/lib/require.js"></script>
</head>

<body>
    <div class="wrap">
        <div class="container">
            <div class="header clearfix">
                <div class="logo-bar left">
                    <a href="index.html"><img class="logo" src="images/logo.png" alt="logo"></a>
                </div>
                <div class="adjust-width clearfix">
                    <nav class="top-nav left">
                        <ul>
                            <li><a href="javascript:;">工作台</a></li>
                            <li class="active"><a href="javascript:;">邮件</a></li>
                            <li><a href="javascript:;">收件人</a></li>
                            <li><a href="javascript:;">报告</a></li>
                            <li><a href="javascript:;">触发式营销</a></li>
                            <li><a href="javascript:;">设置</a></li>
                        </ul>
                    </nav>
                    <div class="top-user right">
                        <ul>
                            <li class="dropdown">
                                <a href="javascript:;">
                                    <span class="member-initials" title="Yang yang">Y</span>
                                    <span id="my-name">Yang yang</span>
                                    <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu" role="menu">
                                    <li><a href="javascript:;">注销</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="javascript:;">帮助</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="main-container">
                <div class="main">
                    <div class="step-bar-wrap">
                        <ol class="nav nav-justified step-bar-nav">
                            <li>
                                <a href="javascript:;">
                                邮件设置
                            </a>
                            </li>
                            <li class="active">
                                <a href="javascript:;">
                                邮件编辑
                            </a>
                            </li>
                            <li>
                                <a href="javascript:;">
                                邮箱发送
                            </a>
                            </li>
                        </ol>
                    </div>
                    <div class="editor-wrap">
                        <div class="editor-header">
                            <span>模板编辑</span>
                        </div>
                        <div class="editor-container">
                            <table width="100%">
                                <tr>
                                    <td class="table-left">
                                        <div id="editor-lb" class="editor-left-bar">
                                            <div class="design-sidebar">
                                                <ul>
                                                    <li class="material-library active"><a href="#material-lib-tab" data-toggle="tab">素材库</a></li>
                                                    <li class="mail-library"><a href="#mail-lib-tab" data-toggle="tab">邮件库</a></li>
                                                    <li class="photo-library"><a href="#photo-lib-tab" data-toggle="tab">图片库</a></li>
                                                </ul>
                                            </div>
                                            <div class="design-content tab-content overflow-visible">
                                                <div id="material-lib-tab" class="tab-pane active">
                                                    <div class="tab-panel-heading">
                                                        <ul class="list-item">
                                                            <li class="active"><a href="#material-item1" data-toggle="tab">头部</a>
                                                            </li>
                                                            <li><a href="#material-item2" data-toggle="tab">图文</a></li>
                                                            <li><a href="#material-item3" data-toggle="tab">分隔</a></li>
                                                            <li><a href="#material-item4" data-toggle="tab">标题</a></li>
                                                            <li><a href="#material-item5" data-toggle="tab">按钮</a></li>
                                                            <li><a href="#material-item6" data-toggle="tab">签名</a></li>
                                                            <li><a href="#material-item7" data-toggle="tab">最近使用</a></li>
                                                        </ul>
                                                    </div>
                                                    <div class="tab-panel-body tab-content overflow-visible">
                                                        <div id="material-item1" class="tab-pane active">
                                                            <ul class="material-item-list custom-scrollbar-tip1">
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\head\head1.json"><span><img
                                                                    src="images/material-header01.jpg"></span></a></li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\head\head2.json"><span><img
                                                                    src="images/material-header02.jpg"></span></a></li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\head\head3.json"><span><img
                                                                    src="images/material-header03.png"></span></a></li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\head\head4.json"><span><img
                                                                    src="images/material-header04.jpg"></span></a></li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\head\head5.json"><span><img
                                                                    src="images/material-header05.jpg"></span></a></li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\head\head6.json"><span><img
                                                                    src="images/material-header06.jpg"></span></a></li>
                                                            </ul>
                                                        </div>
                                                        <div id="material-item2" class="tab-pane">
                                                            <ul class="material-item-list custom-scrollbar-tip1">
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\image-text\image-text1.json"><span><img src="images/material-phototext01.jpg"></span></a>
                                                                </li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\image-text\image-text2.json"><span><img src="images/material-phototext02.jpg"></span></a>
                                                                </li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\image-text\image-text3.json"><span><img src="images/material-phototext03.jpg"></span></a>
                                                                </li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\image-text\image-text4.json"><span><img src="images/material-phototext04.jpg"></span></a>
                                                                </li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\image-text\image-text5.json"><span><img src="images/material-phototext05.jpg"></span></a>
                                                                </li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\image-text\image-text6.json"><span><img src="images/material-phototext06.jpg"></span></a>
                                                                </li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\image-text\image-text7.json"><span><img src="images/material-phototext07.jpg"></span></a>
                                                                </li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\image-text\image-text8.json"><span><img src="images/material-phototext08.jpg"></span></a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <div id="material-item3" class="tab-pane">
                                                            <ul class="material-item-list custom-scrollbar-tip1">
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\separator\divider01.json"><span><img src="images/material-divider01.png"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\separator\divider02.json"><span><img src="images/material-divider02.png"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\separator\divider03.json"><span><img src="images/material-divider03.png"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\separator\divider04.json"><span><img src="images/material-divider04.png"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\separator\divider05.json"><span><img src="images/material-divider05.png"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\separator\divider06.json"><span><img src="images/material-divider06.png"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\separator\divider07.json"><span><img src="images/material-divider07.png"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\separator\divider08.json"><span><img src="images/material-divider08.png"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\separator\divider09.json"><span><img src="images/material-divider09.png"></span></a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <div id="material-item4" class="tab-pane">
                                                            <ul class="material-item-list custom-scrollbar-tip1">
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\title\title01.json"><span><img src="images/material-title01.jpg"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\title\title02.json"><span><img src="images/material-title02.jpg"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\title\title03.json"><span><img src="images/material-title03.jpg"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\title\title04.json"><span><img src="images/material-title04.jpg"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\title\title05.json"><span><img src="images/material-title05.jpg"></span></a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <div id="material-item5" class="tab-pane">
                                                            <ul class="material-item-list custom-scrollbar-tip1">
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\button\button1.json"><span><img
                                                                    src="images/material-button01.png"></span></a></li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\button\button2.json"><span><img
                                                                    src="images/material-button02.png"></span></a></li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\button\button3.json"><span><img
                                                                    src="images/material-button03.png"></span></a></li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\button\button4.json"><span><img
                                                                    src="images/material-button04.png"></span></a></li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\button\button5.json"><span><img
                                                                    src="images/material-button05.png"></span></a></li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\materials\button\button6.json"><span><img
                                                                    src="images/material-button06.png"></span></a></li>
                                                            </ul>
                                                        </div>
                                                        <div id="material-item6" class="tab-pane">
                                                            <ul class="material-item-list custom-scrollbar-tip1">
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\signature\footer01.json"><span><img src="images/material-signature01.jpg"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\signature\footer02.json"><span><img src="images/material-signature02.jpg"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\signature\footer03.json"><span><img src="images/material-signature03.jpg"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\signature\footer04.json"><span><img src="images/material-signature04.jpg"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\signature\footer05.json"><span><img src="images/material-signature05.jpg"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\signature\footer06.json"><span><img src="images/material-signature06.jpg"></span></a>
                                                                </li>
                                                                <li>
                                                                    <a href="javascript:;" data-code-url="\json\code\materials\signature\footer07.json"><span><img src="images/material-signature07.jpg"></span></a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <div id="material-item7" class="tab-pane">
                                                            <ul class="material-item-list custom-scrollbar-tip1">
                                                                <li><a href="javascript:;"><span><img
                                                                    src="images/material-phototext01.jpg"></span></a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div id="mail-lib-tab" class="tab-pane">
                                                    <div class="tab-panel-heading">
                                                        <ul class="list-item">
                                                            <li class="active"><a href="#mail-item1" data-toggle="tab">节日</a></li>
                                                            <li><a href="#mail-item2" data-toggle="tab">促销</a></li>
                                                            <li><a href="#mail-item3" data-toggle="tab">月报</a></li>
                                                            <li><a href="#mail-item4" data-toggle="tab">活动</a></li>
                                                            <li><a href="#mail-item5" data-toggle="tab">通知</a></li>
                                                            <li><a href="#mail-item6" data-toggle="tab">行业</a></li>
                                                            <li><a href="#mail-item7" data-toggle="tab">最近使用</a></li>
                                                        </ul>
                                                    </div>
                                                    <div class="tab-panel-body tab-content overflow-visible">
                                                        <div id="mail-item1" class="tab-pane active">
                                                            <ul class="mail-item-list custom-scrollbar-tip1">
                                                                <li><a href="javascript:;" data-code-url="\json\code\mails\festival\festival1.json"><span><img
                                                                    src="images/mail-template01.jpg" ></span></a></li>
                                                                <li><a href="javascript:;"><span><img
                                                                    src="images/mail-template02.jpg"></span></a></li>
                                                                <li><a href="javascript:;"><span><img
                                                                    src="images/mail-template03.jpg"></span></a></li>
                                                                <li><a href="javascript:;"><span><img
                                                                    src="images/mail-template04.jpg"></span></a></li>
                                                                <li><a href="javascript:;"><span><img
                                                                    src="images/mail-template05.jpg"></span></a></li>
                                                                <li><a href="javascript:;"><span><img src=""></span></a>
                                                                </li>
                                                                <li><a href="javascript:;"><span><img src=""></span></a>
                                                                </li>
                                                                <li><a href="javascript:;"><span><img src=""></span></a>
                                                                </li>
                                                                <li><a href="javascript:;"><span><img src=""></span></a>
                                                                </li>
                                                                <li><a href="javascript:;"><span><img src=""></span></a>
                                                                </li>
                                                                <li><a href="javascript:;"><span><img src=""></span></a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <div id="mail-item2" class="tab-pane">
                                                            <ul class="mail-item-list custom-scrollbar-tip1">
                                                                <li><a href="javascript:;"><span><img
                                                                    src="images/mail-template01.jpg"></span></a></li>
                                                            </ul>
                                                        </div>
                                                        <div id="mail-item3" class="tab-pane">
                                                            <ul class="mail-item-list custom-scrollbar-tip1">
                                                                <li><a href="javascript:;"><span><img
                                                                    src="images/mail-template02.jpg"></span></a></li>
                                                            </ul>
                                                        </div>
                                                        <div id="mail-item4" class="tab-pane">
                                                            <ul class="mail-item-list custom-scrollbar-tip1">
                                                                <li><a href="javascript:;"><span><img
                                                                    src="images/mail-template03.jpg"></span></a></li>
                                                            </ul>
                                                        </div>
                                                        <div id="mail-item5" class="tab-pane">
                                                            <ul class="mail-item-list custom-scrollbar-tip1">
                                                                <li><a href="javascript:;"><span><img
                                                                    src="images/mail-template04.jpg"></span></a></li>
                                                            </ul>
                                                        </div>
                                                        <div id="mail-item6" class="tab-pane">
                                                            <ul class="mail-item-list custom-scrollbar-tip1">
                                                                <li><a href="javascript:;"><span><img
                                                                    src="images/mail-template05.jpg"></span></a></li>
                                                            </ul>
                                                        </div>
                                                        <div id="mail-item7" class="tab-pane">
                                                            <ul class="mail-item-list custom-scrollbar-tip1">
                                                                <li><a href="javascript:;"><span><img
                                                                    src="images/mail-template01.jpg"></span></a></li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div id="photo-lib-tab" class="tab-pane">
                                                    <div class="tab-panel-heading">
                                                        <ul class="list-item">
                                                            <li class="active"><a href="#photo-item1" data-toggle="tab">系统推荐</a></li>
                                                            <li><a href="#photo-item2" data-toggle="tab">社交媒体</a></li>
                                                            <li><a href="#photo-item3" data-toggle="tab">我的上传</a></li>
                                                            <li><a href="#photo-item4" data-toggle="tab">最近使用</a></li>
                                                        </ul>
                                                    </div>
                                                    <div class="tab-panel-body tab-content overflow-visible">
                                                        <div id="photo-item1" class="tab-pane active">
                                                            <ul class="photo-item-list custom-scrollbar-tip1">
                                                                <li><a href="javascript:;" data-code-url="\json\code\images\recommend\recommend1.json"><span><img
                                                                    src="images/photo-recommended01.jpg"></span></a>
                                                                </li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\images\recommend\recommend2.json"><span><img
                                                                    src="images/photo-recommended02.jpg"></span></a>
                                                                </li>
                                                                <li><a href="javascript:;" data-code-url="\json\code\images\recommend\recommend3.json"><span><img
                                                                    src="images/photo-recommended03.jpg"></span></a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <div id="photo-item2" class="tab-pane">
                                                            <ul class="photo-item-list custom-scrollbar-tip1">
                                                                <li><a href="javascript:;"><span><img
                                                                    src="images/photo-recommended01.jpg"></span></a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <div id="photo-item3" class="tab-pane">
                                                            <ul class="photo-item-list custom-scrollbar-tip1">
                                                                <li><a href="javascript:;"><span><img
                                                                    src="images/photo-recommended02.jpg"></span></a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <div id="photo-item4" class="tab-pane">
                                                            <ul class="photo-item-list custom-scrollbar-tip1">
                                                                <li><a href="javascript:;"><span><img
                                                                    src="images/photo-recommended03.jpg"></span></a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="table-right">
                                        <div class="editor-right-bar">
                                            <div id="email-h" class="email-header clearfix">
                                                <div class="email-info left">
                                                    <table>
                                                        <tr>
                                                            <th>邮件标题：</th>
                                                            <td><strong>欢迎使用MailPanda2.0</strong></td>
                                                        </tr>
                                                        <tr>
                                                            <th>发件人：</th>
                                                            <td>MailPanda团队&lt;support@mailpanda.com&gt;</td>
                                                        </tr>
                                                        <tr>
                                                            <th>回复：</th>
                                                            <td>timhon@mailpanda.com</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                                <div class="email-toolbar">
                                                    <ul>
                                                        <li>
                                                            <a href="javascript:;"><img src="images/goback.png" alt="img">返回</a>
                                                        </li>
                                                        <li>
                                                            <a href="javascript:;" id="btnSave"><img src="images/save.png" alt="img">保存</a>
                                                        </li>
                                                        <li>
                                                            <a href="javascript:;" id="btnPreview"><img src="images/preview.png" alt="img">预览</a>
                                                        </li>
                                                        <li>
                                                            <a href="javascript:;" id="btnSend"><img src="images/sent.png" alt="img">发送</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="email-edit-container">
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
require.config({
    baseUrl: 'js/mailEditor',
    paths: {
        "app": "./src",
        "base": "./src/base",
        "Box": "./src/Box",
        "Editor": "./src/Editor",
        "jquery": "./lib/jquery",
        "underscore": "./lib/underscore",
        "has": "./lib/has",
        "text": "./lib/text",
        "i18n": "./lib/i18n",
        "domReady": "./lib/domReady"
    },
    i18n: {
        locale: 'en-us'
    }
});

if (jQuery) {
    define("jquery", function() {
        return jQuery;
    });
}


require(["jquery", "base/sniff", "app/workspace", "domReady!"], function($, sniff, ws) {
    var wind = window,
        $wind = $(wind),
        doc = wind.document,
        $doc = $(doc),
        $frm = $(".email-edit-container"),
        frm = $frm[0];

    window.__ws = ws;
    ws.run({
        container: frm,
        src: "EmailTemplate/email.html",
        height: 850,
        contentCss: [
            "style/tinymce/custom_theme_content.css",
            "style/reset.css",
            "style/base.css",
            "style/common.css",
            "style/widget.css"
        ],
        plugins: ["addReceiverName", "addUnsubscribeLink", "addWebpageLink"],
        toolbar: ["bold", "italic", "underline", "fontFamily", "fontSize", "textColor", "backgroundColor",
            "textAlign", "textHeight", "link", "undo", "redo",
            "addReceiverName", "addUnsubscribeLink", "addWebpageLink"
        ],
        addReceiverName: {
            callback: function(editor) {
                editor.insert("##LastName##");
            }
        },
        addUnsubscribeLink: {
            callback: function(editor) {
                editor.insert("##UnsubscribeLink##");
            }
        },
        addWebpageLink: {
            callback: function(editor) {
                editor.insert("##WebpageLink##");
            }
        }
    });

    //custom event set:
    $("#btnSave").click(function() {
        alert(ws.getHtml());
    });
    $("#btnPreview").click(function() {
        ws.preview(800, 700);
    });
    $("#btnSend").click(function() {
        alert(ws.getHtml());
    });
    $wind.on("beforeunload", function() {
        if (ws.hasChange()) {
            return "Are you sure you want to leave page? All your changes might be lost.";
        }
    });
});
</script>

</html>
